pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
t=0

function _init()
t=t+1

	ship={sp=1,x=60,y=60,h=4,p=0}
	bullets={}
	enemies={}

	for i=1,4 do

 add(enemies, {
  sp=16,
  m_x=i*16,
  m_y=60-i*8,
  x=-32,
  y=-32,
  r=12
 })

 end
end	
	

--mainmenu
scene="menu"
x=100
y=75

	
	
-->8
function _update()
		 t=t+1
		 
  _anim()
			
		_move()
		
	for e in all(enemies) do
  e.x = e.r*sin(t/50) + e.m_x
  e.y = e.r*cos(t/50) + e.m_y
		end
	
		for b in all(bullets) do
		b.x-=b.dy
		end
		
		if scene =="menu" then
		update_menu()
end
		end
--------------------------
function _draw()
			cls()
			rect(0,0,127,127,5)
			spr(ship.sp,ship.x, ship.y)
			
			_bulletpos()
					
			for e in all(enemies) do
  	spr(e.sp,e.x,e.y)
 end

 for i=1,4 do
  if i<=ship.h then 
  spr(33,80+6*i,3)
  else
  spr(34,80+6*i,3)
  end
 end
			
			
		if scene =="menu" then
		draw_menu()
end
	end
			
-->8
-- ship function
function _move()
	 	if btn(⬆️) then ship.y-= 1 end
			if btn(⬇️) then ship.y+= 1 end
			if btn(➡️) then ship.x+= 1 end
			if btn(⬅️) then ship.x-= 1 end	
			if btnp(4) then fire() end 			
end

function _anim()
 ship.sp += 0.25
   if ship.sp>12 then
     	ship.sp=1
   end
end

function fire()
	local b = 
	{
		sp=14,
		x=ship.x,
		y=ship.y,
		dx=0,
		dy=-3,
	}
	add(bullets,b)
end

function _bulletpos()
			for b in all(bullets) do
			spr(b.sp,b.x,b.y)
			end
end
-->8
function draw_menu()
cls()
print("press ❎ to start",30,63,250)
end

function draw_game()
cls()
spr(1,x,y)
end

-- update & inputs
function update_menu()
if btnp(❎) then 
	scene = "game"
	sfx(0)
end
	end
	
	
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000888a000088aa00008aaa0000aaaa0000aaaa0000aaab0000aabb0000abbb0000bbb80000bb880000b88800008888000000000000000000000000000
0007700008cca00008cca00008cca00008cca0000accb0000accb0000accb0000acc80000acc80000bcc80000bcc80000bcca000000000000000000000000000
000770000bcca60008cca60008cca60008ccb60008ccb6000accb6000acc86000acc86000acc86000acc86000bcca6000bcca600000000000000000000000000
007007008bbaa6668bbba66688bbb666888bb6668888b666888886668a8886668aa886668aaa86668aaaa6668aaaa6668baaa666000000000000999900000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
04445500080800000606000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
04888850888880006666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
04899884088800000666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
04899984008000000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
04499944000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05488845000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
04444445000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100000c0500d0500c0500c0500c0500c0500c0500c0500c0500c0500c0500c0500c0500c0500c0500c0500d0500d0500e0500f0501005012050130501505017050190501b0501d05020050220502405027050
